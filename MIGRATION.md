# Міграція проєкту на Vite та ES6 модулі

## Огляд змін

Проєкт Graph Editor було успішно мігровано з традиційного підходу (CDN + монолітний скрипт) на сучасний стек з Vite та ES6 модулями.

## Що було зроблено

### 1. Оновлення залежностей
- ✅ **Cytoscape.js**: Оновлено з CDN версії до npm `v3.33.1` (найновіша версія 2025)
- ✅ **cytoscape-edgehandles**: `v4.0.1` через npm замість локального файлу
- ✅ **cytoscape-cxtmenu**: `v3.5.0` через npm замість локального файлу
- ✅ **lodash**: `v4.17.21` замість CDN

### 2. Інфраструктура
- ✅ Vite `v7.2.2` як build tool та dev server
- ✅ package.json з `"type": "module"` для ES6
- ✅ vite.config.js для налаштування збірки
- ✅ .gitignore для виключення node_modules та build артефактів

### 3. Модульна архітектура

Монолітний `script.js` (1415 рядків) розділено на логічні модулі:

#### Конфігурація (`src/config/`)
- `cytoscapeConfig.js` - ініціалізація Cytoscape з розширеннями
- `cytoscapeStyles.js` - стилі для вузлів та ребер

#### Алгоритми (`src/algorithms/`)
- `mst.js` - алгоритм Prim для мінімального остовного дерева
- `shortestPath.js` - алгоритм Dijkstra
- `spanningTrees.js` - генерація всіх остовних дерев
- `minWeightedPath.js` - пошук мінімального шляху для 4 вершин

#### Модулі додатку (`src/modules/`)
- `eventHandlers.js` - обробники подій Cytoscape
- `edgeHandles.js` - налаштування edgehandles розширення
- `uiHandlers.js` - обробники UI кнопок та алгоритмів
- `gridManager.js` - управління сіткою
- `zoomDisplay.js` - відображення масштабу

#### Утиліти (`src/utils/`)
- `combinatorics.js` - комбінаторні функції
- `grid.js` - функції для роботи з сіткою
- `highlight.js` - підсвітка елементів графу
- `history.js` - управління історією (Undo/Redo)

#### Головний файл
- `src/main.js` - точка входу, ініціалізація всіх модулів

### 4. Оновлення HTML
- Видалено CDN посилання на скрипти
- Додано `<script type="module" src="/src/main.js"></script>`
- Оновлено шляхи до ресурсів (тепер використовується `/public`)

### 5. Структура каталогів

```
Graphs/
├── public/                 # Статичні ресурси (копія з assets/)
│   └── icons/
├── src/                   # Вихідний код
│   ├── algorithms/        # Алгоритми графів
│   ├── config/            # Конфігурація Cytoscape
│   ├── modules/           # Основні модулі
│   ├── utils/             # Допоміжні функції
│   ├── main.js            # Точка входу
│   └── styles.css         # Стилі
├── index.html             # Новий HTML для Vite
├── vite.config.js         # Конфігурація Vite
├── package.json           # Залежності
└── README.md              # Документація
```

## Збережені старі файли

Для відкату або порівняння:
- `index.old.html` - оригінальний HTML
- `script.js` - оригінальний монолітний скрипт (1415 рядків)
- `cytoscape-cxtmenu.js` - локальна копія (більше не потрібна)
- `cytoscape-edgehandles.js` - локальна копія (більше не потрібна)
- `styles.css` - оригінальний CSS (тепер в `src/styles.css`)

## Нові можливості

### Для розробки
```bash
npm run dev       # Запустити dev сервер з HMR
npm run build     # Збірка для production
npm run preview   # Переглянути production збірку
```

### Переваги нової архітектури

1. **Модульність**: Код розділено на логічні модулі, легше підтримувати
2. **Tree-shaking**: Vite видаляє невикористаний код при збірці
3. **HMR**: Hot Module Replacement для швидкої розробки
4. **TypeScript ready**: Легко додати TypeScript в майбутньому
5. **Актуальні версії**: Використання найновіших версій бібліотек
6. **npm пакети**: Легке оновлення залежностей через `npm update`

## Сумісність

### Підтримка браузерів
- Chrome/Edge 61+
- Firefox 60+
- Safari 11+

### Нові можливості Cytoscape.js 3.33.1
- Експериментальна підтримка WebGL рендерингу
- Нативна підтримка TypeScript типів
- Покращена продуктивність
- Нові опції для layouts

## Можливі подальші покращення

1. **TypeScript**: Додати типізацію для кращої безпеки коду
2. **Тестування**: Додати unit тести (Jest/Vitest)
3. **PWA**: Зробити прогресивний веб-додаток
4. **Web Workers**: Винести важкі обчислення в workers
5. **State Management**: Додати Zustand або Pinia для складнішого стану

## Контрольний список міграції

- [x] Встановлено Vite
- [x] Встановлено Cytoscape.js v3.33.1
- [x] Встановлено розширення через npm
- [x] Створено модульну структуру
- [x] Розділено монолітний скрипт
- [x] Оновлено HTML
- [x] Налаштовано Vite
- [x] Створено .gitignore
- [x] Протестовано dev сервер
- [x] Написано документацію

## Запуск проєкту

1. Встановіть залежності:
   ```bash
   npm install
   ```

2. Запустіть dev сервер:
   ```bash
   npm run dev
   ```

3. Відкрийте браузер за адресою `http://localhost:3002`

## Підтримка

Всі функції оригінального проєкту збережені:
- ✅ Додавання вузлів та ребер
- ✅ Прив'язка до сітки
- ✅ Направлені/ненаправлені графи
- ✅ Ваги на ребрах
- ✅ Undo/Redo
- ✅ Import/Export
- ✅ Всі алгоритми (MST, shortest path, тощо)
- ✅ Візуальна підсвітка результатів

---

**Дата міграції**: 15 листопада 2025
**Версія Cytoscape.js**: 3.33.1
**Build tool**: Vite 7.2.2
